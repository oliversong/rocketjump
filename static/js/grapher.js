// Generated by CoffeeScript 1.4.0
(function() {
  var parse, poll;

  parse = function(str, separator) {
    var i, keyVal, len, pairs, parsed;
    parsed = {};
    pairs = str.split(separator);
    i = 0;
    len = pairs.length;
    keyVal = void 0;
    while (i < len) {
      keyVal = pairs[i].split("=");
      if (keyVal[0]) {
        parsed[keyVal[0]] = keyVal[1];
      }
      ++i;
    }
    return parsed;
  };

  (poll = function() {
    var pathname;
    pathname = window.location.pathname;
    console.log(pathname);
    return setTimeout((function() {
      return $.post(pathname + '/polll', function(d, st, xr) {
        var f, shit;
        console.log(d);
        d = d.replace(/\'/g, '');
        shit = $.parseJSON(d);
        console.log(shit);
        $('.duderow > div:first').remove();
        f = shit['taking'] + shit['queuelength'];
        console.log(f);
        $('.duderow').append('<div class="span1 datapoint" style="height:' + f * 0.05 * 300 + 'px></div>');
        return poll();
      });
    }), 2000);
  })();

}).call(this);
