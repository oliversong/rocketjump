// Generated by CoffeeScript 1.4.0
(function() {
  var parse, poll;

  parse = function(str, separator) {
    var i, keyVal, len, pairs, parsed;
    parsed = {};
    pairs = str.split(separator);
    i = 0;
    len = pairs.length;
    keyVal = void 0;
    while (i < len) {
      keyVal = pairs[i].split("=");
      if (keyVal[0]) {
        parsed[keyVal[0]] = keyVal[1];
      }
      ++i;
    }
    return parsed;
  };

  (poll = function() {
    var pathname;
    pathname = window.location.pathname;
    console.log(pathname);
    return setTimeout((function() {
      return $.post(pathname + '/polll', function(d, st, xr) {
        var x;
        console.log(d);
        x = $.parseJSON(d);
        $('.duderow1 > div:first').remove();
        $('.duderow2 > div:first').remove();
        $('.duderow3 > div:first').remove();
        $('.numConnect').text(x[2]);
        $('.numQueued').text(x[0]);
        $('.numEnrolled').text(x[1]);
        $('.duderow1').append('<div class="span1 datapoint" style="height:' + x[1] * 0.01 * 300 + 'px"><span class="intext">' + x[1] + '</span></div>');
        $('.duderow2').append('<div class="span1 datapoint" style="height:' + x[2] * 0.01 * 300 + 'px"><span class="intext">' + x[2] + '</span></div>');
        $('.duderow3').append('<div class="span1 datapoint" style="height:' + x[0] * 0.01 * 300 + 'px"><span class="intext">' + x[0] + '</span></div>');
        return poll();
      });
    }), 2000);
  })();

}).call(this);
